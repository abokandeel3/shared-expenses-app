@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes slideInUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}:root{--primary-color:#024657;--primary-hover:#0b8ba1;--secondary-color:#0b8ba1;--secondary-hover:#044454;--success-color:#10b981;--success-hover:#059669;--danger-color:#ef4444;--danger-hover:#dc2626;--warning-color:#f59e0b;--warning-hover:#d97706;--light-color:#f8fafc;--dark-color:#1e293b;--gray-100:#f1f5f9;--gray-200:#e2e8f0;--gray-300:#cbd5e1;--gray-400:#94a3b8;--gray-500:#64748b;--gray-600:#475569;--gray-700:#334155;--gray-800:#1e293b;--white:#ffffff;--text-white:#ffffff;--border-radius:12px;--border-radius-lg:16px;--border-radius-sm:8px;--box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);--box-shadow-lg:0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);--transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);--icon-color:#0f172a}body.dark-mode{--gray-800:#f1f5f9;--gray-700:#f8fafc;--gray-600:#e2e8f0;--gray-500:#cbd5e1;--gray-400:#94a3b8;--gray-300:#64748b;--gray-200:#475569;--gray-100:#334155;--gray-50:#1e293b;--white:#0f172a;--light-color:#1e293b;--icon-color:#ffffff;background:linear-gradient(135deg,#0f172a 0,#1e293b 100%)}*,h1{margin:0}*{padding:0;box-sizing:border-box}body{font-family:"Inter","Segoe UI",-apple-system,BlinkMacSystemFont,sans-serif;background:linear-gradient(135deg,#f1f5f9 0,#e2e8f0 100%);color:var(--gray-800);line-height:1.7;padding:24px;direction:rtl;min-height:100vh;transition:background-color .3s,color .3s}.container{max-width:1280px;margin:0 auto;padding:24px}header{text-align:center;margin-bottom:24px;padding:24px;background:linear-gradient(135deg,var(--primary-color) 0%,var(--secondary-color) 100%);color:var(--text-white);border-radius:var(--border-radius-lg);box-shadow:var(--box-shadow-lg);position:relative;overflow:hidden}#theme-toggle,input,select{transition:var(--transition)}#theme-toggle{position:absolute;top:20px;right:20px;background:0 0;border:2px solid rgba(255,255,255,.5);width:44px;height:44px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:8px;opacity:.8}#theme-toggle:hover{opacity:1;transform:scale(1.1) rotate(-15deg);border-color:var(--white)}.theme-icon{width:100%;height:100%;color:var(--icon-color)}.moon-icon,body.dark-mode .sun-icon{display:none}body.dark-mode .moon-icon,label{display:block}h1{font-size:2.5rem;font-weight:700}.description{font-size:1.125rem;max-width:800px;margin:0 auto 40px;text-align:center;color:var(--gray-600)}.app-container{display:grid;grid-template-columns:1fr;gap:32px;margin-bottom:32px}.card{background-color:var(--white);border-radius:var(--border-radius-lg);box-shadow:var(--box-shadow);padding:32px;border:1px solid var(--gray-200)}.card-title-container{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--gray-100)}.card-title{font-size:1.5rem;font-weight:600;color:var(--gray-800);margin:0;padding:0;border:0}.form-group{margin-bottom:24px}label{margin-bottom:8px;font-weight:500;color:var(--gray-700)}input,select{width:100%;padding:16px 20px;border:2px solid var(--gray-200);border-radius:var(--border-radius);font-size:1rem;background-color:var(--gray-50);color:var(--gray-800)}input:focus,select:focus{outline:0;border-color:var(--primary-color);box-shadow:0 0 0 4px rgba(37,99,235,.1);background-color:var(--white)}.price-label{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.price-label .total-label{font-weight:700;color:var(--success-color)}.expense-type-fields{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:16px}.expense-type-fields .field-group{display:flex;flex-direction:column}.btn,.expense-table th{color:var(--text-white);text-align:center;font-weight:600}.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:16px 32px;border:0;border-radius:var(--border-radius);font-size:1rem;cursor:pointer;transition:var(--transition);width:100%;box-shadow:var(--box-shadow)}.btn:hover{transform:translateY(-2px);box-shadow:var(--box-shadow-lg)}.btn-add{background-color:var(--success-color);height:48px}.btn-add:hover{background-color:var(--success-hover)}.btn-export{background-color:var(--secondary-color)}.btn-export:hover{background-color:var(--secondary-hover)}.btn-reset{background-color:var(--danger-color);height:48px}.btn-reset:hover{background-color:var(--danger-hover)}.btn-warning{background-color:var(--warning-color)}.btn-warning:hover{background-color:var(--warning-hover)}.form-actions{display:flex;gap:12px;margin-top:16px}.form-actions .btn{flex:1}.btn-customize,.filter-group label{color:var(--gray-600);font-weight:500}.btn-customize{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background-color:var(--gray-100);border:1px solid var(--gray-200);border-radius:var(--border-radius-sm);font-size:.9rem;justify-content:center;cursor:pointer;transition:var(--transition)}.btn-customize:hover{background-color:var(--gray-200);color:var(--primary-color);border-color:var(--primary-color);transform:translateY(-1px)}.btn-customize svg{width:20px;height:20px}.data-actions-group{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin-top:24px;margin-bottom:24px}.filter-controls{display:grid;gap:20px;padding:24px;background:var(--gray-50);border-radius:var(--border-radius-lg);border:2px solid var(--gray-200);grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto auto;grid-template-areas:"search type date-from date-to"". button button ."}#filter-search{grid-area:search}#filter-type{grid-area:type}#filter-date-from{grid-area:date-from}#filter-date-to{grid-area:date-to}#resetFiltersBtn{grid-area:button;width:60%;justify-self:center;padding:12px 16px;font-size:1.1rem}.filter-group label{font-size:.875rem}.expense-table td,.filter-group input,.filter-group select{padding:12px 16px;font-size:.9375rem}.expense-table-container{max-height:500px;overflow-y:auto;margin-top:20px;border-radius:var(--border-radius-lg);box-shadow:var(--box-shadow);border:1px solid var(--gray-200);overflow-x:auto;-webkit-overflow-scrolling:touch}.expense-table{width:100%;border-collapse:collapse;background-color:var(--white);min-width:700px}.expense-table th{background:var(--primary-color);padding:20px 24px;font-size:.875rem;position:sticky;top:0;z-index:10;white-space:nowrap}.expense-table td{padding:16px 24px;border-bottom:1px solid var(--gray-200);text-align:center;vertical-align:middle;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.expense-table tr:nth-child(even){background-color:var(--gray-50)}.expense-table tr:hover{background-color:var(--gray-100)}.action-buttons{display:flex;justify-content:center;align-items:center;gap:8px}.delete-btn,.edit-btn{border:0;padding:8px 16px;border-radius:var(--border-radius-sm);cursor:pointer;font-size:.875rem;font-weight:500;transition:var(--transition);color:var(--text-white);box-shadow:var(--box-shadow);width:auto}.delete-btn{background-color:var(--danger-color)}.delete-btn:hover,.edit-btn:hover{background-color:var(--danger-hover);transform:translateY(-1px)}.edit-btn{background-color:var(--warning-color)}.edit-btn:hover{background-color:var(--warning-hover)}.pagination-controls{display:flex;justify-content:center;align-items:center;gap:16px;margin-top:24px}.pagination-controls .btn{width:auto;min-width:100px;background-color:var(--primary-color);padding:8px 24px;font-size:.9rem}.pagination-controls .btn:hover{background-color:var(--primary-hover)}.pagination-controls .btn:disabled{background-color:var(--gray-300);cursor:not-allowed;transform:none;box-shadow:none}#pageInfo,.summary-card h3{font-weight:600;color:var(--gray-600)}.recurring-indicator{margin-left:8px;vertical-align:middle}.summary-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;margin-bottom:32px}.summary-card{background-color:var(--white);border-radius:var(--border-radius-lg);box-shadow:var(--box-shadow);padding:24px;text-align:center;border:1px solid var(--gray-200)}.summary-card h3{font-size:1rem;margin-bottom:12px;font-weight:500}.summary-card .amount{font-size:2rem;font-weight:700}.you-paid{color:var(--success-color)}.partner-paid,.recurring-item-info strong{color:var(--secondary-color)}.difference-card{color:var(--danger-color)}.total-card .amount{color:var(--warning-color)}.totals-container{margin-top:32px;padding:24px;background:var(--gray-50);border-radius:var(--border-radius-lg);border:2px solid var(--gray-200)}.total-item{margin-bottom:16px;padding-bottom:16px;border-bottom:1px dashed var(--gray-300);display:flex;justify-content:space-between;align-items:center;font-size:1rem;font-weight:500}.total-item:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.difference{font-weight:700;font-size:1.25rem;color:var(--primary-color);padding:16px 20px;background:#dbeafe;border-radius:var(--border-radius);border:2px solid var(--secondary-color);text-align:center}body.dark-mode .difference{background:#1e293b;border-color:var(--secondary-color);color:var(--text-white)}.footer{text-align:center;margin-top:48px;padding-top:24px;border-top:2px solid var(--gray-200);color:var(--gray-500);font-size:.875rem}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(15,23,42,.8);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;padding:20px;z-index:1000;animation:fadeIn .3s cubic-bezier(.4,0,.2,1)}.modal-content{background-color:var(--white);padding:24px;border-radius:var(--border-radius-lg);box-shadow:var(--box-shadow-lg);width:100%;max-width:700px;max-height:90vh;display:flex;flex-direction:column;animation:slideInUp .4s cubic-bezier(.4,0,.2,1)}.modal-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:16px;margin-bottom:16px;border-bottom:1px solid var(--gray-200)}.modal-header h3{color:var(--gray-800);font-size:1.25rem;font-weight:600}.modal-close-btn,.operator-selector button{border:0;cursor:pointer;transition:var(--transition)}.modal-close-btn{background:0 0;font-size:2rem;line-height:1;color:var(--gray-400)}.modal-close-btn:hover{color:var(--danger-color);transform:rotate(90deg)}.modal-body{overflow-y:auto;padding-right:12px;margin-right:-12px}.modal-footer{padding-top:16px;margin-top:auto;border-top:1px solid var(--gray-200);display:flex;justify-content:flex-end;gap:12px}.modal-footer .btn{width:auto;padding:12px 24px}.type-editor-item{background:var(--gray-50);padding:20px;border-radius:var(--border-radius);margin-bottom:16px;border:1px solid var(--gray-200)}.type-editor-header{flex-direction:column;align-items:stretch}.field-editor-list,.type-editor-actions,.type-editor-header{display:flex;gap:12px}.type-editor-actions .btn{flex:1;width:auto;height:auto;padding:12px;font-size:.9rem}.type-editor-header input{font-weight:600;font-size:1.1rem;padding:12px}.field-editor-list{margin-top:20px;flex-direction:column}.field-editor-list label{font-size:.9rem;margin-bottom:4px}.field-editor-row{display:grid;grid-template-columns:1fr auto auto;gap:12px;align-items:flex-end}.field-editor-row input{padding:10px}.field-editor-row .btn{width:38px;height:38px;padding:6px}.operator-selector{display:flex;border:1px solid var(--gray-300);border-radius:var(--border-radius-sm);overflow:hidden}.operator-selector button{background:var(--white);border-right:1px solid var(--gray-300);padding:8px 12px;color:var(--gray-600);font-weight:700;font-size:1rem}.operator-selector button:last-child{border-right:none}.operator-selector button:hover{background-color:var(--gray-100)}.operator-selector button.active{color:var(--text-white)}.formula-preview{margin-top:16px;padding:12px;background:var(--gray-100);border-radius:var(--border-radius-sm);text-align:center;font-family:"Courier New",Courier,monospace;font-weight:600;color:var(--secondary-color);direction:ltr}.formula-preview span{color:var(--gray-500);font-size:.9rem}.add-field-btn{width:auto!important;padding:8px 16px!important;font-size:.9rem!important;margin-top:12px;background-color:var(--primary-hover)}.add-field-btn:hover,.operator-selector button.active{background-color:var(--primary-color)}#budgetsListContainer{display:flex;flex-direction:column;gap:20px;max-height:350px;overflow-y:auto;padding-left:12px}.placeholder-text{color:var(--gray-500);text-align:center;padding:20px 0}.budget-item{display:flex;flex-direction:column;gap:8px}.budget-item-header{display:flex;justify-content:space-between;align-items:baseline;font-weight:600}.budget-item-category{color:var(--gray-800)}.budget-item-amount{font-size:.9rem;color:var(--gray-600)}.progress-bar-container{width:100%;height:12px;background-color:var(--gray-200);border-radius:6px;overflow:hidden}.progress-bar-fill{height:100%;border-radius:6px;transition:width .5s cubic-bezier(.4,0,.2,1)}.progress-bar-fill.low{background-color:var(--success-color)}.progress-bar-fill.medium{background-color:var(--warning-color)}.progress-bar-fill.high{background-color:var(--danger-color)}.budget-item-footer{font-size:.85rem;font-weight:500;text-align:left}.budget-item-footer.over-budget{color:var(--danger-hover)}#budgetsModalFooter{justify-content:space-between}.budget-settings-list{display:flex;flex-direction:column;gap:16px}.budget-setting-item{display:grid;grid-template-columns:1fr auto;grid-template-rows:auto auto;grid-template-areas:"name name""controls button";align-items:center;gap:8px;padding:16px;border-radius:var(--border-radius);background-color:var(--gray-50);position:relative}.budget-setting-item>span{grid-area:name;font-weight:600;color:var(--gray-800);margin-bottom:8px}.budget-controls{grid-area:controls;display:flex;gap:10px;align-items:center}.budget-input-group{display:flex;align-items:center;gap:8px;flex-grow:1}.budget-input-group input{width:120px;padding:10px;text-align:center}.budget-input-group span{color:var(--gray-500)}.budget-period-select{padding:10px;min-width:100px}.budget-item-delete-btn{grid-area:button;width:38px;height:38px;background:0 0;border:0;border-radius:50%;color:var(--gray-400);font-size:1.5rem;line-height:1;cursor:pointer;transition:var(--transition);display:flex;align-items:center;justify-content:center}.budget-item-delete-btn:hover{background-color:var(--danger-color);color:#fff}.add-budget-form{padding:16px;margin-top:16px;background-color:var(--gray-50);border:2px dashed var(--gray-200);border-radius:var(--border-radius);display:grid;grid-template-columns:1fr;gap:12px;align-items:center}.add-budget-form-inputs{display:grid;grid-template-columns:1fr 1fr;gap:10px}.add-budget-form input,.add-budget-form select{padding:12px}.add-budget-form .btn{width:100%;padding:12px 20px}@media (min-width:768px){.app-container{grid-template-columns:1fr 1fr}#expenseForm{display:grid;grid-template-columns:1fr;gap:16px}.add-budget-form{grid-template-columns:1fr auto auto}.add-budget-form-inputs{display:contents}}@media (min-width:768px) and (max-width:1024px){.app-container{grid-template-columns:1fr}}@media (max-width:1200px){.filter-controls{grid-template-columns:1fr 1fr;grid-template-rows:auto auto auto;grid-template-areas:"search type""date-from date-to""button button"}#resetFiltersBtn{width:100%}}@media (max-width:767px){#resetFiltersBtn,.container,body,header{padding:16px}header{display:grid;grid-template-columns:auto 1fr;align-items:center;gap:16px}header h1{font-size:1.5rem;text-align:center;grid-column:2}header #theme-toggle{position:static;grid-column:1;grid-row:1;width:36px;height:36px;border:0}.card{padding:20px}.card-title-container{padding-bottom:12px;margin-bottom:20px}.card-title{font-size:1.2rem}.btn-customize{padding:3px 6px;font-size:1.1rem;gap:4px;justify-content:center}.btn-customize svg{width:16px;height:16px}#expenseForm .btn{margin-top:12px}.data-actions-group,.filter-controls,.summary-cards{grid-template-columns:1fr}.filter-controls{grid-template-rows:auto;grid-template-areas:"search""type""date-from""date-to""button"}.expense-table-container{overflow-x:auto;-webkit-overflow-scrolling:touch}.expense-table{min-width:700px}.expense-table td,.expense-table th{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:12px 10px;font-size:.9rem}.modal-content{padding:16px}.budget-setting-item,.field-editor-row{grid-template-columns:1fr auto;grid-template-rows:auto auto;gap:8px}.field-editor-row input{grid-column:1/-1}.field-editor-row .operator-selector{grid-column:1/span 1}.field-editor-row .btn{grid-column:2/span 1;grid-row:2/span 1}.budget-setting-item{display:grid;grid-template-areas:"name   name""controls button";align-items:center;padding:12px}.budget-item-delete-btn{grid-area:button;align-self:center}.budget-setting-item>span{grid-area:name}.budget-controls{grid-area:controls;display:flex;flex-direction:column;align-items:stretch;gap:10px}.budget-input-group input{width:100%}.add-budget-form-inputs{grid-template-columns:1fr}.budgets-card .card-title-container{flex-direction:column;align-items:flex-start;gap:12px;padding-bottom:12px}.budgets-card .card-title-container>div{width:100%;display:flex;justify-content:flex-end;gap:8px;margin-top:0}}.form-group-inline{background-color:var(--gray-50);padding:12px;border-radius:var(--border-radius);justify-content:space-between}.form-group-inline,.form-group-inline>div{display:flex;align-items:center;gap:10px}#isRecurring{height:18px;width:18px;accent-color:var(--primary-color)}.checkbox-label{margin-bottom:0;user-select:none;cursor:pointer}.recurring-item{display:flex;justify-content:space-between;align-items:center;padding:16px;border-radius:var(--border-radius);background-color:var(--gray-50);margin-bottom:12px;border:1px solid var(--gray-200)}.recurring-item-details{display:flex;flex-direction:column;gap:4px}.recurring-item-desc{font-weight:600;color:var(--gray-800)}.recurring-item-info{font-size:.9rem;color:var(--gray-500)}.recurring-item-actions .btn-reset{width:auto;padding:8px 12px;font-size:.85rem}.collapsible-info{background-color:var(--gray-50);border:1px solid var(--gray-200);border-radius:var(--border-radius);margin-bottom:16px}.collapsible-title{padding:16px;font-weight:600;cursor:pointer;outline:0;position:relative;color:var(--primary-color);list-style:none}.collapsible-title::-webkit-details-marker{display:none}.collapsible-title::after{content:"+";position:absolute;left:16px;top:50%;transform:translateY(-50%);font-size:1.5rem;transition:transform .3s ease}.collapsible-info[open]>.collapsible-title::after{transform:translateY(-50%) rotate(45deg)}.collapsible-content{padding:0 16px 16px;font-size:.95rem;color:var(--gray-600);line-height:1.6}body.dark-mode .collapsible-info[open]>.collapsible-title,body.dark-mode .collapsible-title{color:var(--gray-400)}body.dark-mode .collapsible-title:hover{color:var(--white)}.split-options-container{background-color:var(--gray-50);border-radius:var(--border-radius);padding:0;margin-bottom:24px;max-height:0;overflow:hidden;transition:all .4s ease-in-out}.split-options-container.visible{padding:20px;max-height:300px}.split-option-group{display:none;grid-template-columns:1fr 1fr;gap:16px;align-items:center}.split-option-group.visible{display:grid}input:read-only{background-color:var(--gray-200);cursor:not-allowed;opacity:.7}